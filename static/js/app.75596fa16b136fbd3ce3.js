webpackJsonp([1],{"4ml/":function(t,e){},DTXk:function(t,e){},Iddm:function(t,e){},K9Fw:function(t,e){},KGO9:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({},o,!1,function(t){a("eza9")},null,null).exports,r=(a("4ml/"),a("/ocq")),i=a("mvHQ"),c=a.n(i),l=a("Fd2+"),u=a("mtWM"),d=a.n(u),p={name:"Login",data:function(){return{username:"",password:""}},methods:{loginHandle:function(){var t=this;Object(u.post)("https://api.cat-shop.penkuoer.com/api/v1/auth/login",{userName:this.username,password:this.password}).then(function(e){"success"==e.data.code?(l.k.success("登陆成功"),localStorage.setItem("token",e.data.token),localStorage.setItem("username",c()(t.username)),t.$router.push("/")):alert("账号或密码错误")})},onClickLeft:function(){this.$router.go(-1)}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("van-nav-bar",{attrs:{title:"会员登录","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:"用户名",placeholder:"请输入用户名",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("van-field",{attrs:{label:"密码",type:"password",placeholder:"请输入密码",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("van-button",{staticClass:"btn-login",attrs:{type:"danger",size:"large"},on:{click:t.loginHandle}},[t._v("登录")]),t._v(" "),a("van-row",{staticClass:"box-user",attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"6"}},[a("router-link",{attrs:{to:""}},[t._v("找回密码")])],1),t._v(" "),a("van-col",{attrs:{span:"6"}},[a("router-link",{attrs:{to:"/Register"}},[t._v("用户注册")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(p,v,!1,function(t){a("K9Fw")},"data-v-caf6a35e",null).exports,m={name:"Register",data:function(){return{username:"",password:"",sms:"",password2:"",yanzheng:""}},methods:{getSmsAuthHandle:function(){this.yanzheng=function(){for(var t=[],e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],a=0;a<4;a++){var n=Math.floor(62*Math.random());t.push(e[n])}return t.join("")}()},registerHandle:function(){var t=this;if(""!=this.username&&""!=this.password){if(this.password!=this.password2)return this.password="",this.password2="",void alert("两次输入密码不一致");if(this.sms)return this.sms.toLowerCase()!=this.yanzheng.toLowerCase()?(alert("验证码输入错误"),this.sms="",void this.getSmsAuthHandle()):void Object(u.post)("https://api.cat-shop.penkuoer.com/api/v1/auth/reg",{userName:this.username,password:this.password}).then(function(e){"success"==e.data.code?(alert("注册成功"),localStorage.setItem("token",e.data.token),localStorage.setItem("username",c()(t.username)),t.$router.push("/Home")):(alert("用户名已被注册"),t.yanzheng="",t.sms="",t.password="",t.password2="",t.getSmsAuthHandle()),console.log(e)});alert("验证码不能为空")}else alert("请输入账号或者密码")},onClickLeft:function(){this.$router.go(-1)}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register"},[a("van-nav-bar",{attrs:{title:"会员注册","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{placeholder:"请输入用户名",label:"用户名",clearable:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),a("van-field",{attrs:{type:"password",placeholder:"请输入密码",label:"密码",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("van-field",{attrs:{type:"password",placeholder:"请再次输入密码",label:"确认密码",clearable:""},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}}),t._v(" "),a("van-field",{attrs:{center:"",clearable:"",label:"验证码",placeholder:"请输入验证码"},model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}},[a("van-button",{staticClass:"btn-getyzm",attrs:{slot:"button",size:"small",type:"danger"},on:{click:t.getSmsAuthHandle},slot:"button"},[t._v(t._s(this.yanzheng?this.yanzheng:"点击获取验证码"))])],1)],1),t._v(" "),a("van-row",{attrs:{type:"flex",justify:"center"}},[a("van-col",{attrs:{span:"12"}},[a("router-link",{staticClass:"xieyi",attrs:{to:""}},[t._v("《星空购物用户协议》")])],1)],1),t._v(" "),a("van-button",{staticClass:"btn-login",attrs:{type:"danger",size:"large"},on:{click:t.registerHandle}},[t._v("同意协议并注册")]),t._v(" "),a("van-row",{attrs:{type:"flex",justify:"end"}},[a("van-col",{attrs:{span:"6"}},[a("router-link",{staticClass:"btn-bangding",attrs:{to:""}},[t._v("老用户绑定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(m,f,!1,function(t){a("s/gh")},"data-v-113db9a0",null).exports,_={data:function(){return{active:0}},methods:{Cart:function(){null==localStorage.getItem("token")?this.$router.push("/Login"):this.$router.push("/Cart")},About:function(){null==localStorage.getItem("token")?this.$router.push("/Login"):this.$router.push("/About")}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view"),t._v(" "),a("footer",[a("van-tabbar",{attrs:{"active-color":"#f82d30"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"wap-home",to:{name:"Home"}}},[t._v("首页")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"apps-o",to:{name:"List"},dot:""}},[t._v("分类")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"cart-o"},on:{click:t.Cart}},[t._v("购物车")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"contact"},on:{click:t.About}},[t._v("我的")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(_,k,!1,function(t){a("Iddm")},"data-v-681a58e6",null).exports,C={name:"List",data:function(){return{products:[],arr:["综合","销量","价格","上架时间"],changeRed:-1}},created:function(){var t=this;Object(u.get)("https://api.cat-shop.penkuoer.com/api/v1/products").then(function(e){t.products=e.data.products}).catch(function(t){alert(t)})},methods:{change:function(t){this.changeRed=t},tap:function(){this.$router.go(-1)}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("i",[a("van-icon",{attrs:{name:"arrow-left"},on:{click:function(e){return t.tap()}}})],1),t._v(" "),a("div",{staticClass:"Sou"},[a("input",{attrs:{type:"text",id:"txt",placeholder:"搜索商品名称或商品编号"}}),t._v(" "),a("i",[a("van-icon",{attrs:{name:"search"}})],1)]),t._v(" "),a("i",[a("van-icon",{attrs:{name:"description"}})],1)]),t._v(" "),a("ul",{staticClass:"nav"},t._l(t.arr,function(e,n){return a("li",{key:n,staticClass:"aa",class:{red:t.changeRed==n},on:{click:function(e){return t.change(n)}}},[t._v(t._s(e))])}),0),t._v(" "),a("div",{staticClass:"_list"},t._l(t.products,function(t){return a("van-card",{key:t._id,attrs:{num:t.quantity,price:t.price,desc:t.descriptions,title:t.name,thumb:"https://api.cat-shop.penkuoer.com"+t.coverImg,"thumb-link":"#/Detail/"+t._id}})}),1)])},staticRenderFns:[]};var w=a("VU/8")(C,x,!1,function(t){a("KGO9")},"data-v-7fcdc386",null).exports,y={data:function(){return{images:[],imageURL:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2735633715,2749454924&fm=27&gp=0.jpg",reXiao:[],isShow:localStorage.getItem("token")}},mounted:function(){var t=this;d.a.get("https://api.cat-shop.penkuoer.com/api/v1/products",{params:{per:"6"}}).then(function(e){for(var a=0;a<e.data.products.length;a++)t.images.push("https://api.cat-shop.penkuoer.com"+e.data.products[a].coverImg);t.reXiao=e.data.products})},function:function(t){}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("h1",[t._v("星空购物")]),t._v(" "),a("van-search",{attrs:{placeholder:"搜索商品名称或商品编号",shape:"round"}}),t._v(" "),a("router-link",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}],staticClass:"btn-login",attrs:{to:"/login"}},[t._v("登录")])],1),t._v(" "),a("div",{staticClass:"wrap"},[a("van-swipe",{attrs:{autoplay:3e3,height:200}},t._l(t.images,function(t,e){return a("van-swipe-item",{key:e},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])}),1),t._v(" "),a("ul",{staticClass:"nav"},[a("li",[a("router-link",{attrs:{to:"/List"}},[a("p",{staticClass:"icon iconfont"},[t._v("")]),a("em",[t._v("列表")])])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/Cart"}},[a("p",{staticClass:"icon iconfont"},[t._v("")]),a("em",[t._v("购物车")])])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/Home"}},[a("p",{staticClass:"icon iconfont"},[t._v("")]),a("em",[t._v("新品")])])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:"/About"}},[a("p",{staticClass:"icon iconfont"},[t._v("")]),a("em",[t._v("我的星空")])])],1)]),t._v(" "),a("div",{staticClass:"zhiBo"},[t._m(0),t._v(" "),a("van-card",{attrs:{price:"2.00",desc:"描述信息",title:"商品标题",thumb:t.imageURL}})],1),t._v(" "),a("div",{staticClass:"reXiao"},[t._m(1),t._v(" "),a("ul",{staticClass:"_img"},t._l(t.reXiao,function(e,n){return a("li",{key:n},[a("router-link",{attrs:{to:"/Detail/"+e._id}},[a("img",{attrs:{src:"https://api.cat-shop.penkuoer.com"+e.coverImg}}),t._v(" "),a("p",[t._v("￥"+t._s(e.price))])])],1)}),0)])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",[e("i",{staticClass:"iconfont"},[this._v("")]),this._v("直播商品"),e("a",{attrs:{href:""}},[this._v("更多>>")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",[e("i"),this._v("热销商品")])}]};var I,$=a("VU/8")(y,S,!1,function(t){a("cRTn")},"data-v-c2fdcda2",null).exports,R=a("bOdI"),z=a.n(R),L={components:(I={},z()(I,l.i.name,l.i),z()(I,l.f.name,l.f),z()(I,l.g.name,l.g),z()(I,l.b.name,l.b),z()(I,l.c.name,l.c),I),data:function(){return{username:""}},mounted:function(){this.username=JSON.parse(localStorage.getItem("username"))}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{staticClass:"user-poster",attrs:{src:"https://img.yzcdn.cn/public_files/2017/10/23/8690bb321356070e0b8c4404d087f8fd.png"}}),t._v(" "),a("p",{staticClass:"name"},[t._v("欢迎："+t._s(t.username))]),t._v(" "),a("van-row",{staticClass:"user-links"},[a("van-col",{attrs:{span:"6"}},[a("van-icon",{attrs:{name:"pending-payment"}}),t._v("\n      待付款\n    ")],1),t._v(" "),a("van-col",{attrs:{span:"6"}},[a("van-icon",{attrs:{name:"records"}}),t._v("\n      待接单\n    ")],1),t._v(" "),a("van-col",{attrs:{span:"6"}},[a("van-icon",{attrs:{name:"tosend"}}),t._v("\n      待发货\n    ")],1),t._v(" "),a("van-col",{attrs:{span:"6"}},[a("van-icon",{attrs:{name:"logistics"}}),t._v("\n      已发货\n    ")],1)],1),t._v(" "),a("van-cell-group",{staticClass:"user-group"},[a("van-cell",{attrs:{icon:"records",title:"全部订单","is-link":""}})],1),t._v(" "),a("van-cell-group",[a("van-cell",{attrs:{icon:"points",title:"我的积分","is-link":""}}),t._v(" "),a("van-cell",{attrs:{icon:"gold-coin-o",title:"我的优惠券","is-link":""}}),t._v(" "),a("van-cell",{attrs:{icon:"gift-o",title:"我收到的礼物","is-link":""}})],1)],1)},staticRenderFns:[]};var H=a("VU/8")(L,j,!1,function(t){a("WxED")},"data-v-b16bce0e",null).exports,O={components:{},data:function(){return{goods:{id:"",img:"",descriptions:"",name:"",jieshao:"",price:"",num:"0"}}},mounted:function(){var t=this;Object(u.get)("https://api.cat-shop.penkuoer.com/api/v1/products/"+this.$route.params.id).then(function(e){t.goods.img=e.data.coverImg,t.goods.descriptions=e.data.descriptions,t.goods.price=e.data.price,t.goods.name=e.data.name,t.goods.jieshao=e.data.descriptions,t.goods.id=e.data._id}).catch(function(t){console.log(t)}),Object(u.get)("https://api.cat-shop.penkuoer.com//api/v1/shop_carts",{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.goods.num=e.data.length})},methods:{formatPrice:function(){return"¥"+(this.goods.price/100).toFixed(2)},onClickCart:function(){this.$router.push("/cart")},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){Toast("按钮")},goCart:function(){var t=this;Object(u.post)("https://api.cat-shop.penkuoer.com/api/v1/shop_carts",{product:this.goods.id,quantity:this.goods.num},{headers:{authorization:" Bearer "+localStorage.getItem("token")}}).then(function(e){Object(u.get)("https://api.cat-shop.penkuoer.com//api/v1/shop_carts",{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.goods.num=e.data.length,console.log(e.data.length)}),t.$toast("加入成功")})}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","right-text":"按钮","left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),t._v(" "),a("van-cell-group",[a("van-cell",[a("div",{staticClass:"goods-title"},[a("img",{attrs:{src:"https://api.cat-shop.penkuoer.com"+t.goods.img}})]),t._v(" "),a("div",{staticClass:"goods-title"},[t._v(t._s(t.goods.name))]),t._v(" "),a("div",{staticClass:"goods-title"},[t._v(t._s(t.goods.jieshao))]),t._v(" "),a("div",{staticClass:"goods-price"},[t._v("￥："+t._s(t.goods.price))])])],1),t._v(" "),a("van-goods-action",[a("van-goods-action-mini-btn",{attrs:{icon:"chat-o",text:"客服"}}),t._v(" "),a("van-goods-action-mini-btn",{attrs:{info:t.goods.num,icon:"cart-o",text:"购物车"},on:{click:t.onClickCart}}),t._v(" "),a("van-goods-action-mini-btn",{attrs:{icon:"shop-o",text:"店铺"}}),t._v(" "),a("van-goods-action-big-btn",{attrs:{text:"加入购物车"},on:{click:function(e){return t.goCart()}}}),t._v(" "),a("van-goods-action-big-btn",{attrs:{primary:"",text:"立即购买"}})],1)],1)},staticRenderFns:[]};var U,A=a("VU/8")(O,F,!1,function(t){a("ODU9")},"data-v-5f22ded6",null).exports,E={components:(U={},z()(U,l.a.name,l.a),z()(U,l.d.name,l.d),z()(U,l.j.name,l.j),z()(U,l.e.name,l.e),U),data:function(){return{checkedGoods:[],goods:[],value:1}},computed:{submitBarText:function(){var t=this.checkedGoods.length;return"结算"+(t?"("+t+")":"")},totalPrice:function(){var t=this;return this.goods.reduce(function(e,a){return e+(-1!==t.checkedGoods.indexOf(a.product._id)?100*a.product.price:0)},0)}},methods:{formatPrice:function(t){return t.toFixed(2)},onSubmit:function(){Object(l.k)("点击结算")},onClickLeft:function(){this.$router.go(-1)},del:function(t,e){var a=this;d.a.delete("https://api.cat-shop.penkuoer.com/api/v1/shop_carts/"+t,{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){null!=t.data&&(a.goods.splice(e,1),a.checkedGoods.splice(e,1))})}},mounted:function(){var t=this;Object(u.get)("https://api.cat-shop.penkuoer.com//api/v1/shop_carts",{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){for(var a=0;a<e.data.length;a++)null!=e.data[a].product&&(t.checkedGoods.push(e.data[a].product._id),t.goods.push(e.data[a]))})}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("van-nav-bar",{attrs:{title:"购物车","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),a("div",{staticClass:"Cart"},[a("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.goods,function(e,n){return a("van-checkbox",{key:e.product._id,staticClass:"card-goods__item",attrs:{name:e.product._id}},[a("van-card",{attrs:{title:e.product.name,desc:e.product.descriptions,price:t.formatPrice(e.product.price),thumb:"https://api.cat-shop.penkuoer.com"+e.product.coverImg}}),t._v(" "),a("van-button",{staticClass:"del",attrs:{size:"mini",type:"danger"},on:{click:function(a){return a.stopPropagation(),t.del(e._id,n)}}},[t._v("删除")])],1)}),1),t._v(" "),a("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.checkedGoods.length,"button-text":t.submitBarText},on:{submit:t.onSubmit}})],1)])},staticRenderFns:[]};var B=a("VU/8")(E,G,!1,function(t){a("DTXk")},"data-v-b89bb8f4",null).exports;n.a.use(l.l);var D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("i",[a("van-icon",{attrs:{name:"arrow-left"}})],1),t._v(" "),a("div",{staticClass:"Sou"},[a("input",{attrs:{type:"text",id:"txt",placeholder:"搜索商品名称或商品编号"}}),t._v(" "),a("i",[a("van-icon",{attrs:{name:"search"}})],1)]),t._v(" "),a("i",[a("van-icon",{attrs:{name:"description"}})],1)]),t._v(" "),a("van-tree-select",{attrs:{items:t.items,"main-active-index":t.mainActiveIndex},on:{navclick:t.onNavClick,itemclick:t.onItemClick}})],1)},staticRenderFns:[]};var N=a("VU/8")({data:function(){return{items:[{text:"所有城市",children:[{text:"杭州",id:1},{text:"上海",id:"2"},{text:"北京",id:"3"}]},{text:"景点",children:[{text:"西湖",id:1},{text:"寒山寺",id:"2"},{text:"九龙井",id:"3"}]}],mainActiveIndex:0}},methods:{onNavClick:function(t){this.mainActiveIndex=t},onItemClick:function(t){this.activeId=t.id}}},D,!1,function(t){a("Ukqx")},"data-v-f9f5cec8",null).exports;n.a.use(l.k),n.a.use(r.a),n.a.use(l.m),n.a.use(l.h);var V=new r.a({routes:[{path:"/Login",name:"Login",component:h},{path:"/Register",name:"Register",component:g},{path:"/",name:"Index",component:b,redirect:"/Home",children:[{path:"/Home",name:"Home",component:$},{path:"/Sort",name:"Sort",component:N},{path:"/List",name:"List",component:w},{path:"/About",name:"About",component:H},{path:"/Cart",name:"Cart",component:B}]},{path:"/Detail/:id",name:"Detail",component:A}]}),P=(a("YPlB"),a("NYxO"));n.a.use(P.a),n.a.config.productionTip=!1;var T=new P.a.Store({});new n.a({el:"#app",store:T,router:V,components:{App:s},template:"<App/>"})},ODU9:function(t,e){},Ukqx:function(t,e){},WxED:function(t,e){},YPlB:function(t,e){},cRTn:function(t,e){},eza9:function(t,e){},"s/gh":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.75596fa16b136fbd3ce3.js.map